<div class="page-title">
    <i class="bi bi-journal-text"></i> Administración de Menú
</div>

<div class="macos-card mb-4 p-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h5 class="mb-0">Categorías</h5>
        </div>
        <button class="btn macos-btn macos-btn-primary btn-sm" hx-get="/forms/category"
            hx-target="#categoryFormContainer">
            <i class="bi bi-plus-circle"></i> Nueva Categoría
        </button>
    </div>

    <div id="categoryFormContainer"></div>

    <div class="row mb-3">
        <div class="col-12">
            <div class="btn-group w-100">
                <button class="btn btn-outline-secondary active" hx-get="/products" hx-target="#productList">
                    Todos
                </button>
                {{range .Categories}}
                <button class="btn btn-outline-secondary" hx-get="/products/category/{{.}}" hx-target="#productList">
                    {{.}}
                </button>
                {{end}}
            </div>
        </div>
    </div>

    <div id="productList" hx-get="/products" hx-trigger="load" class="mt-4">
        <!-- Contenido dinámico: Lista de productos -->
    </div>
</div>

<div class="macos-card p-4">
    <h5 class="mb-3">Agregar Nuevo Producto</h5>
    <form hx-post="/products" hx-target="#productList" hx-swap="outerHTML">
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Nombre del Producto</label>
                <input type="text" class="form-control" name="name" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">Precio ($)</label>
                <input type="number" class="form-control" name="price" step="0.01" min="0" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">Categoría</label>
                <select class="form-select" name="category" required>
                    {{range .Categories}}
                    <option value="{{.}}">{{.}}</option>
                    {{end}}
                </select>
            </div>
        </div>
        <div class="mb-3">
            <label class="form-label">Descripción</label>
            <textarea class="form-control" name="description" rows="2"></textarea>
        </div>
        <div class="text-end">
            <button type="submit" class="btn macos-btn macos-btn-primary">
                <i class="bi bi-plus-circle me-1"></i> Agregar Producto
            </button>
        </div>
    </form>
</div>

<!-- Añadir al final del archivo -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar Producto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- El contenido del formulario se cargará dinámicamente -->
                <div class="d-flex justify-content-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Cargando...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>